#!/usr/bin/env bash
################################################################################
# Pre-Commit Hook
################################################################################
# PURPOSE: Run automated checks before each commit
# - Check for compiled binaries
# - Run Go formatting checks
# - Run quick linting
# - Run tests
################################################################################

set -e

echo "ğŸ” Running pre-commit checks..."

# Check for binaries first
if [ -f .husky/check-binaries ]; then
    ./.husky/check-binaries
fi

# Run quick test suite (includes linting)
echo ""
echo "ğŸ§ª Running tests and linting..."
./scripts/test.sh --quick || {
    echo ""
    echo "âš ï¸  Some tests failed, but allowing commit to proceed"
    echo "âš ï¸  Please review test failures and fix before merging"
}

echo ""
echo "âœ… Pre-commit checks complete!"

